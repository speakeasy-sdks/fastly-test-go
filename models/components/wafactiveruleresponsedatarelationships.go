// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package components

import (
	"Fastly/internal/utils"
	"errors"
)

type WafActiveRuleResponseDataRelationshipsType string

const (
	WafActiveRuleResponseDataRelationshipsTypeRelationshipWafFirewallVersion WafActiveRuleResponseDataRelationshipsType = "relationship_waf_firewall_version"
	WafActiveRuleResponseDataRelationshipsTypeRelationshipWafRuleRevision    WafActiveRuleResponseDataRelationshipsType = "relationship_waf_rule_revision"
)

type WafActiveRuleResponseDataRelationships struct {
	RelationshipWafFirewallVersion *RelationshipWafFirewallVersion
	RelationshipWafRuleRevision    *RelationshipWafRuleRevision

	Type WafActiveRuleResponseDataRelationshipsType
}

func CreateWafActiveRuleResponseDataRelationshipsRelationshipWafFirewallVersion(relationshipWafFirewallVersion RelationshipWafFirewallVersion) WafActiveRuleResponseDataRelationships {
	typ := WafActiveRuleResponseDataRelationshipsTypeRelationshipWafFirewallVersion

	return WafActiveRuleResponseDataRelationships{
		RelationshipWafFirewallVersion: &relationshipWafFirewallVersion,
		Type:                           typ,
	}
}

func CreateWafActiveRuleResponseDataRelationshipsRelationshipWafRuleRevision(relationshipWafRuleRevision RelationshipWafRuleRevision) WafActiveRuleResponseDataRelationships {
	typ := WafActiveRuleResponseDataRelationshipsTypeRelationshipWafRuleRevision

	return WafActiveRuleResponseDataRelationships{
		RelationshipWafRuleRevision: &relationshipWafRuleRevision,
		Type:                        typ,
	}
}

func (u *WafActiveRuleResponseDataRelationships) UnmarshalJSON(data []byte) error {

	relationshipWafFirewallVersion := RelationshipWafFirewallVersion{}
	if err := utils.UnmarshalJSON(data, &relationshipWafFirewallVersion, "", true, true); err == nil {
		u.RelationshipWafFirewallVersion = &relationshipWafFirewallVersion
		u.Type = WafActiveRuleResponseDataRelationshipsTypeRelationshipWafFirewallVersion
		return nil
	}

	relationshipWafRuleRevision := RelationshipWafRuleRevision{}
	if err := utils.UnmarshalJSON(data, &relationshipWafRuleRevision, "", true, true); err == nil {
		u.RelationshipWafRuleRevision = &relationshipWafRuleRevision
		u.Type = WafActiveRuleResponseDataRelationshipsTypeRelationshipWafRuleRevision
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u WafActiveRuleResponseDataRelationships) MarshalJSON() ([]byte, error) {
	if u.RelationshipWafFirewallVersion != nil {
		return utils.MarshalJSON(u.RelationshipWafFirewallVersion, "", true)
	}

	if u.RelationshipWafRuleRevision != nil {
		return utils.MarshalJSON(u.RelationshipWafRuleRevision, "", true)
	}

	return nil, errors.New("could not marshal union type: all fields are null")
}
